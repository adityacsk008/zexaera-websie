<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - ZexaEra</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        .sidebar-animate { animation: slideIn 0.3s ease-out; }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Sidebar -->
    <div class="fixed inset-y-0 left-0 w-64 bg-blue-800 text-white sidebar-animate">
        <div class="p-4">
            <h1 class="text-2xl font-bold">Zexa<span class="text-blue-200">Era</span></h1>
            <p class="text-sm text-blue-200">Admin Dashboard</p>
        </div>
        <nav class="mt-8">
            <a href="#dashboard" class="flex items-center px-4 py-3 text-white bg-blue-900">
                <i class="fas fa-home w-6"></i>
                <span>Dashboard</span>
            </a>
            <a href="#users" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                <i class="fas fa-users w-6"></i>
                <span>Users</span>
            </a>
            <a href="#courses" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                <i class="fas fa-graduation-cap w-6"></i>
                <span>Courses</span>
            </a>
            <a href="#settings" class="flex items-center px-4 py-3 text-blue-200 hover:bg-blue-700">
                <i class="fas fa-cog w-6"></i>
                <span>Settings</span>
            </a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="ml-64 p-8">
        <!-- Top Bar -->
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-2xl font-bold text-gray-800" id="pageTitle">Dashboard Overview</h2>
            <div class="flex items-center space-x-4">
                <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700" id="addNewBtn">
                    <i class="fas fa-plus mr-2"></i>Add New
                </button>
                <div class="relative">
                    <button class="flex items-center space-x-2 text-gray-700 hover:text-blue-600">
                        <img src="https://ui-avatars.com/api/?name=Admin&background=0D8ABC&color=fff" 
                             alt="Admin" class="w-8 h-8 rounded-full">
                        <span>Admin</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Dashboard Content -->
        <div id="dashboardContent">
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500">Total Users</p>
                            <h3 class="text-2xl font-bold" id="totalUsers">1,234</h3>
                        </div>
                        <div class="bg-blue-100 p-3 rounded-full">
                            <i class="fas fa-users text-blue-600"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500">Active Courses</p>
                            <h3 class="text-2xl font-bold">15</h3>
                        </div>
                        <div class="bg-green-100 p-3 rounded-full">
                            <i class="fas fa-graduation-cap text-green-600"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500">Revenue</p>
                            <h3 class="text-2xl font-bold">â‚¹45,678</h3>
                        </div>
                        <div class="bg-yellow-100 p-3 rounded-full">
                            <i class="fas fa-rupee-sign text-yellow-600"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500">New Enrollments</p>
                            <h3 class="text-2xl font-bold">89</h3>
                        </div>
                        <div class="bg-purple-100 p-3 rounded-full">
                            <i class="fas fa-user-plus text-purple-600"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold mb-4">Recent Activity</h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                        <div class="flex items-center space-x-4">
                            <div class="bg-blue-100 p-2 rounded-full">
                                <i class="fas fa-user-plus text-blue-600"></i>
                            </div>
                            <div>
                                <p class="font-medium">New user registration</p>
                                <p class="text-sm text-gray-500">John Doe registered for Web Development course</p>
                            </div>
                        </div>
                        <span class="text-sm text-gray-500">2 hours ago</span>
                    </div>
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                        <div class="flex items-center space-x-4">
                            <div class="bg-green-100 p-2 rounded-full">
                                <i class="fas fa-check text-green-600"></i>
                            </div>
                            <div>
                                <p class="font-medium">Course completion</p>
                                <p class="text-sm text-gray-500">Sarah completed JavaScript Course</p>
                            </div>
                        </div>
                        <span class="text-sm text-gray-500">5 hours ago</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Users Content (Hidden by default) -->
        <div id="usersContent" class="hidden">
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold">Registered Users</h3>
                    <div class="flex space-x-2">
                        <input type="text" id="userSearch" placeholder="Search users..." 
                            class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <button id="refreshUsers" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Registration Date</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="usersTableBody">
                            <!-- User rows will be dynamically added here -->
                        </tbody>
                    </table>
                </div>
                
                <div id="noUsersMessage" class="text-center py-8 text-gray-500 hidden">
                    No users found. Try refreshing the page.
                </div>
            </div>
        </div>
    </div>

    <script>
        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            // Simple authentication check
            // In a real application, you would use a more secure method
            const isAuthenticated = sessionStorage.getItem('isAuthenticated');
            
            if (!isAuthenticated) {
                // If not authenticated, redirect to login page
                window.location.href = 'admin-login.html';
            }
            
            // Add logout functionality
            const adminButton = document.querySelector('.relative button');
            adminButton.addEventListener('click', function() {
                // Create a dropdown menu
                const dropdown = document.createElement('div');
                dropdown.className = 'absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10';
                dropdown.innerHTML = `
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                    <a href="#" id="logoutButton" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Logout</a>
                `;
                
                // Add the dropdown to the page
                const parent = this.parentElement;
                parent.appendChild(dropdown);
                
                // Handle logout
                document.getElementById('logoutButton').addEventListener('click', function(e) {
                    e.preventDefault();
                    sessionStorage.removeItem('isAuthenticated');
                    window.location.href = 'admin-login.html';
                });
                
                // Close dropdown when clicking outside
                document.addEventListener('click', function closeDropdown(e) {
                    if (!parent.contains(e.target)) {
                        dropdown.remove();
                        document.removeEventListener('click', closeDropdown);
                    }
                });
            });

            // Navigation functionality
            const navLinks = document.querySelectorAll('nav a');
            const dashboardContent = document.getElementById('dashboardContent');
            const usersContent = document.getElementById('usersContent');
            const pageTitle = document.getElementById('pageTitle');
            const addNewBtn = document.getElementById('addNewBtn');
            const userSearch = document.getElementById('userSearch');
            const refreshUsers = document.getElementById('refreshUsers');
            const usersTableBody = document.getElementById('usersTableBody');
            const noUsersMessage = document.getElementById('noUsersMessage');
            const totalUsersElement = document.getElementById('totalUsers');

            // Function to load and display users
            function loadUsers() {
                // Get registered users from localStorage
                const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
                
                // Update total users count
                totalUsersElement.textContent = registeredUsers.length;
                
                // Clear existing table rows
                usersTableBody.innerHTML = '';
                
                if (registeredUsers.length === 0) {
                    noUsersMessage.classList.remove('hidden');
                    return;
                }
                
                noUsersMessage.classList.add('hidden');
                
                // Add each user to the table
                registeredUsers.forEach((user, index) => {
                    const row = document.createElement('tr');
                    
                    // Generate a random date within the last 30 days
                    const randomDays = Math.floor(Math.random() * 30);
                    const registrationDate = new Date();
                    registrationDate.setDate(registrationDate.getDate() - randomDays);
                    const formattedDate = registrationDate.toLocaleDateString();
                    
                    // Generate a random status
                    const statuses = ['Active', 'Inactive', 'Pending'];
                    const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
                    const statusClass = randomStatus === 'Active' ? 'bg-green-100 text-green-800' : 
                                       randomStatus === 'Inactive' ? 'bg-red-100 text-red-800' : 
                                       'bg-yellow-100 text-yellow-800';
                    
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 h-10 w-10">
                                    <img class="h-10 w-10 rounded-full" src="https://ui-avatars.com/api/?name=${encodeURIComponent(user.name)}&background=0D8ABC&color=fff" alt="">
                                </div>
                                <div class="ml-4">
                                    <div class="text-sm font-medium text-gray-900">${user.name}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${user.email}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${formattedDate}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusClass}">
                                ${randomStatus}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <button class="text-blue-600 hover:text-blue-900 mr-3 view-user" data-index="${index}">View</button>
                            <button class="text-red-600 hover:text-red-900 delete-user" data-index="${index}">Delete</button>
                        </td>
                    `;
                    
                    usersTableBody.appendChild(row);
                });
                
                // Add event listeners to delete buttons
                document.querySelectorAll('.delete-user').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        if (confirm('Are you sure you want to delete this user?')) {
                            deleteUser(index);
                        }
                    });
                });
                
                // Add event listeners to view buttons
                document.querySelectorAll('.view-user').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        viewUser(index);
                    });
                });
            }
            
            // Function to delete a user
            function deleteUser(index) {
                const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
                registeredUsers.splice(index, 1);
                localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
                loadUsers();
            }
            
            // Function to view user details
            function viewUser(index) {
                const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
                const user = registeredUsers[index];
                
                alert(`User Details:\n\nName: ${user.name}\nEmail: ${user.email}\n\nNote: Password is not displayed for security reasons.`);
            }
            
            // Function to search users
            function searchUsers(query) {
                const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
                const filteredUsers = registeredUsers.filter(user => 
                    user.name.toLowerCase().includes(query.toLowerCase()) || 
                    user.email.toLowerCase().includes(query.toLowerCase())
                );
                
                // Clear existing table rows
                usersTableBody.innerHTML = '';
                
                if (filteredUsers.length === 0) {
                    noUsersMessage.classList.remove('hidden');
                    return;
                }
                
                noUsersMessage.classList.add('hidden');
                
                // Add filtered users to the table
                filteredUsers.forEach((user, index) => {
                    const row = document.createElement('tr');
                    
                    // Generate a random date within the last 30 days
                    const randomDays = Math.floor(Math.random() * 30);
                    const registrationDate = new Date();
                    registrationDate.setDate(registrationDate.getDate() - randomDays);
                    const formattedDate = registrationDate.toLocaleDateString();
                    
                    // Generate a random status
                    const statuses = ['Active', 'Inactive', 'Pending'];
                    const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
                    const statusClass = randomStatus === 'Active' ? 'bg-green-100 text-green-800' : 
                                       randomStatus === 'Inactive' ? 'bg-red-100 text-red-800' : 
                                       'bg-yellow-100 text-yellow-800';
                    
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 h-10 w-10">
                                    <img class="h-10 w-10 rounded-full" src="https://ui-avatars.com/api/?name=${encodeURIComponent(user.name)}&background=0D8ABC&color=fff" alt="">
                                </div>
                                <div class="ml-4">
                                    <div class="text-sm font-medium text-gray-900">${user.name}</div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${user.email}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${formattedDate}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusClass}">
                                ${randomStatus}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <button class="text-blue-600 hover:text-blue-900 mr-3 view-user" data-index="${index}">View</button>
                            <button class="text-red-600 hover:text-red-900 delete-user" data-index="${index}">Delete</button>
                        </td>
                    `;
                    
                    usersTableBody.appendChild(row);
                });
                
                // Add event listeners to delete buttons
                document.querySelectorAll('.delete-user').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        if (confirm('Are you sure you want to delete this user?')) {
                            deleteUser(index);
                        }
                    });
                });
                
                // Add event listeners to view buttons
                document.querySelectorAll('.view-user').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        viewUser(index);
                    });
                });
            }
            
            // Add event listeners to navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all links
                    navLinks.forEach(l => l.classList.remove('bg-blue-900'));
                    navLinks.forEach(l => l.classList.add('text-blue-200'));
                    
                    // Add active class to clicked link
                    this.classList.remove('text-blue-200');
                    this.classList.add('bg-blue-900');
                    
                    // Show/hide content based on clicked link
                    const href = this.getAttribute('href');
                    
                    if (href === '#dashboard') {
                        dashboardContent.classList.remove('hidden');
                        usersContent.classList.add('hidden');
                        pageTitle.textContent = 'Dashboard Overview';
                        addNewBtn.innerHTML = '<i class="fas fa-plus mr-2"></i>Add New';
                    } else if (href === '#users') {
                        dashboardContent.classList.add('hidden');
                        usersContent.classList.remove('hidden');
                        pageTitle.textContent = 'User Management';
                        addNewBtn.innerHTML = '<i class="fas fa-user-plus mr-2"></i>Add User';
                        
                        // Load users when users tab is clicked
                        loadUsers();
                    } else if (href === '#courses') {
                        dashboardContent.classList.add('hidden');
                        usersContent.classList.add('hidden');
                        pageTitle.textContent = 'Course Management';
                        addNewBtn.innerHTML = '<i class="fas fa-plus mr-2"></i>Add Course';
                    } else if (href === '#settings') {
                        dashboardContent.classList.add('hidden');
                        usersContent.classList.add('hidden');
                        pageTitle.textContent = 'Settings';
                        addNewBtn.innerHTML = '<i class="fas fa-save mr-2"></i>Save Changes';
                    }
                });
            });
            
            // Add event listener to search input
            userSearch.addEventListener('input', function() {
                searchUsers(this.value);
            });
            
            // Add event listener to refresh button
            refreshUsers.addEventListener('click', function() {
                loadUsers();
            });
            
            // Add event listener to add new button
            addNewBtn.addEventListener('click', function() {
                const currentPage = pageTitle.textContent;
                
                if (currentPage === 'User Management') {
                    alert('Add User functionality would be implemented here.');
                } else if (currentPage === 'Course Management') {
                    alert('Add Course functionality would be implemented here.');
                } else if (currentPage === 'Settings') {
                    alert('Save Changes functionality would be implemented here.');
                } else {
                    alert('Add New functionality would be implemented here.');
                }
            });
        });
    </script>
</body>
</html> 